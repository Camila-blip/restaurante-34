generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Cliente {
  id      Int      @id @default(autoincrement())
  usuarioId Int @unique
  usuario Usuario @relation(fields: [usuarioId], references: [id])
  pedido Pedido[]
  nome    String?
  email   String   @unique
  data DateTime?
  cpf     String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}
model TipoAcesso{
  id Int @id @default(autoincrement())
  enumerador String @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model Usuario{
  id Int @id @default(autoincrement()) 
  tipoAcesso String
  login String @unique
  senha String
  funcionario Funcionario?
  cliente Cliente?
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model Funcionario{
  id Int @id @default(autoincrement()) 
  usuarioId Int @unique
  usuario Usuario @relation(fields: [usuarioId], references: [id])
  nome String
  cargo String
  admin String
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model Pedido{
  id Int @id @default(autoincrement())
  clienteId Int @unique
  cliente Cliente @relation(fields: [clienteId], references: [id])
  statusPagamentoId Int @unique
  statusPagamento StatusPagamento @relation(fields: [statusPagamentoId], references: [id])
  statusPedidoId Int @unique
  statusPedido StatusPedido @relation(fields: [statusPedidoId], references: [id])
  produtoId Int @unique
  produtos Produto @relation(fields: [produtoId], references: [id])
  nomeCliente String
  ProdutosDoPedido ProdutosDoPedido[]
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model StatusPedido{
  id Int @id @default(autoincrement())
  pedido Pedido?
  enumerador String @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model StatusPagamento{
  id Int @id @default(autoincrement())
  pedido Pedido?
  enumerador String @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}
model Cardapio{
  id Int @id @default(autoincrement())
  produtosDoCardapio ProdutosDoCardapio[]
  descricao String
  ativo Boolean
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model ProdutosDoPedido{
  id Int @id @default(autoincrement())
  produtoId Int @unique
  produto Produto @relation(fields: [produtoId], references: [id])
  pedidoId Int
  pedido Pedido @relation(fields: [pedidoId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model Produto{
  id Int @id @default(autoincrement())
  produtosDoCardapio ProdutosDoCardapio[]
  ProdutosDoPedido ProdutosDoPedido[]
  categoriaProdutoId Int @unique
  categoriaProduto CategoriaProduto @relation(fields: [categoriaProdutoId], references: [id])
  pedido Pedido[]
  descricao  String
  preco Decimal
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model Pagamento{
  id Int @id @default(autoincrement())
  realizado Boolean
  tipo String
  data DateTime
  valor Decimal
  pedido Int
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model CategoriaProduto{
  id Int @id @default(autoincrement())
  produto Produto?
  enumerador String @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model ProdutosDoCardapio {
  id Int @id @default(autoincrement())
  produto Produto @relation(fields: [produtoId], references: [id])
  produtoId Int @unique
  cardapio Cardapio @relation(fields: [cardapioId], references: [id])
  cardapioId Int @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}